# Guidelines
* ##### Record Changes
  Record all changes made against compromised machines. Include those changes in the final report.
* ##### Sensitive Information
  Protect all information gathered, to the point of encrypting it, and deleting it when the penetration test is completed. Obfuscate or mask sensitive information, even in reports to the client.
* ##### Persistence
  Implement authentication with any persistence methods used, to prevents others from accessing the system.  
* ##### Clean-up
  Remove all changes, when the penetration test is done.
* ##### Permanent Changes
  If the engagement allows for any permanent changes, such as deleting logs, make back-ups before making changes.

# Post-Exploitation Commands 
### Multi OS
##### [Post Exploitation Wiki](https://github.com/mubix/post-exploitation-wiki)
##### [Post-Exploitation Command List](http://tim3warri0r.blogspot.com/)
### Linux
##### [Linux/Unix/BSD Post-Exploitation Command List](Documents/Linux_Unix_BSD_Post-Exploitation_Command_List.pdf)
* [Linux/Unix/BSD Post-Exploitation Command List](https://docs.google.com/document/d/1ObQB6hmVvRPCgPTRZM5NMH034VDM-1N-EWPRz2770K4/edit?hl=en_US)
##### [Linux Post Exploitation](https://web.archive.org/web/20150317144317/https:/n0where.net/linux-post-exploitation)
### Metasploit
##### [Metasploit Post-Exploitation Command List](Documents/Metasploit_Post_Exploitation_Command_List.pdf)
* [Metasploit Post-Exploitation Command List](https://docs.google.com/document/d/1ZrDJMQkrp_YbU_9Ni9wMNF2m3nIPEA_kekqqqA2Ywto/edit?pref=2&pli=1)
##### Meterpreter Scripts
```bash
run scraper
run winenum
run screenshot
run keyscan_start
run keylogrecorder
```
##### Metasploit Modules
```bash
search post/windows/credentials
search post/windows/gather/credentials

search post/multi/gather
```
### OS X
##### [OS X Post-Exploitation Command List](Documents/OSX_Post-Exploitation.pdf)
* [OS X Post-Exploitation Command List](https://docs.google.com/document/d/10AUm_zUdAQGgoHNo_eS0SO1K-24VVYnulUD2x3rJD3k/edit?hl=en_US)
### Windows
##### [Windows Post-Exploitation Command Execution](Documents/Windows_Post-Exploitation_Command_List.pdf)
* [Windows Post-Exploitation Command Execution](https://docs.google.com/document/d/1U10isynOpQtrIK6ChuReu-K1WHTJm4fgG3joiuz43rw/edit?hl=en_US)

# Steps of Post-Exploitation
* [Stabalize Shell](#Stabalize-Shell)
* [Escalate Privileges](#Privilege-Escalation)
* [Persistence](#Persistence)
* [Pillage Data](#Pillaging)
* [Scan Internal Network](#Internal-Network-Scanning)
* [Exploit New Systems](#Exploiting-New-Systems)
* [Pivot](#Pivoting)
* [Data Exfiltration](#Exfiltrating-Data)

# Stabalize Shell
* [Upgrade a non-Meterpreter, Metasploit shell to Meterpreter](../../Tools/Metasploit/README.md#Upgrade-Shell-to-Meterpreter-Shell).
* [Migrate a Meterpreter shell to another process](../../Tools/Metasploit/README.md#Migrate-to-Another-Process).
* [Upgrade Linux shell to TTY](../../Tools/Shells/Reverse/README.md#Stabalize-Shell)

# Privilege Escalation
This attack involves local exploits and comes after an attacker has limited access to a target and wants to gain elevated privileges.
Unlike Remote and Client Exploits, this attack requires access to the target.

### Types
* Vertical - escalates privileges to a higher level user.
* Horizontal - moves laterally, to a different user, without increasing privileges.

### [Meterpreter](../../Tools/Metasploit/README.md#Escalate-Privileges)

### [Linux](PrivilegeEscalation/Linux/README.md)

### [Windows](PrivilegeEscalation/Windows/README.md)

# [Persistence](Persistence.md)

# Pillaging
* [Enumerate Services with Meterpreter](../../Tools/Metasploit/README.md#Get-Services)
* [Enumerate Running Processes with Meterpreter](../../Tools/Metasploit/README.md#Get-Processes)
### Linux
* Enumerate Linux with Meterpreter
```bash
search post/linux/gather
```
* Get Users
```bash
cat /etc/passwd
```
### Windows
* systeminfo
```bash
systeminfo
```
* Enumerate Windows with Meterpreter
```bash
search post/windows/gather
```
* [Enumerate Services with CMD](../../Tools/Shells/Windows/CMD/README.md#Services)
* [Enumerate Services with PowerShell](../../Tools/Shells/Windows/PowerShell/README.md#Services)
* Get Domain Information with Meterpreter
```bash
user post/windows/gather/enum_domains
```
* [Get Domain Information with CMD](../../Tools/Shells/Windows/CMD/README.md#Get-Domain-Information)
* Get Users with CMD
```bash
net user
```
* Get Domain User Accounts with CMD
```bash
net user /domain
```
* Get Domain User Accounts with Meterpreter
```bash
use post/windows/gather/enum_ad_users
```
* Get List of Local Groups
```bash
net localgroup
```
* Get Members of Local Group
```bash
net localgroup [Group Name]
```
* Get List of Shares with CMD
```bash
net share
```
* Get List of Shares with Meterpreter
```bash
use post/windows/gather/enum_shares
```
* Get Network Connections
```bash
netstat -ano
```
* Get Running Services with Service Application Management
```bash
wmic service where started=true get caption, started
```
* Meterpreter Scripts
```bash
meterpreter > run scraper
meterpreter > run winenum
```

# [Pivoting](Pivoting.md)
### Internal Network Scanning
* Get network interfaces [Linux](../../Tools/Shells/Linux/README.md#List-All-Interfaces) or [Windows](../../Tools/Shells/Windows/CMD/README.md#List-All-Interfaces).
* Use route to get network routes [Linux](../../Tools/Shells/Linux/README.md#List-Network-Routes-with-route) or [Windows](../../Tools/Shells/Windows/CMD/README.md#List-Network-Routes-with-route).
* Use arp.
* Use netstat.
* Identify domains and IPs with [DNS cache](../../Tools/Shells/Windows/CMD/README.md#Display-DNS-Cache).
* Use meterpreter's arp scanner (post/windows/gather/arp_scanner).
* Use meterpreter's ping sweep (post/multi/gather/ping_sweep).
### Exploiting New Systems
* [Add a route to a new system with meterpreter](../../Tools/Metasploit/README.md#Add-Route).
* [Perform port scan with meterpreter](../../Tools/Metasploit/README.md#Port-Scan).
* [Setup proxychains to allow non-meterpreter scanners](../../Tools/Metasploit/README.md#Start-SOCKS-Proxy-for-Proxy-Chains).
* [Use meterpreter's port forwarding](../../Tools/Metasploit/README.md#Port-Forwarding).
* [Use meterpreter's routing to reach targets on other subnets](../../Tools/Metasploit/README.md#Establish-Reverse-Shell-from-Second-Victim-with-SMB).
* [Use meterpreter's routing to reach targets on other subnets, using Victim 1 as proxy](../../Tools/Metasploit/README.md#Establish-Reverse-Shell-from-Second-Victim-with-SMB).  This is useful if Victim 2 does not have Internet access.
* [Generate HTTPS payload](../../Tools/Metasploit/README.md#HTTPS-Reverse-Shell-with-Impersonate-SSL), [establish multi handler](../../Tools/Metasploit/README.md#Multi-Handler-with-PEM), transfer payload to the target.

# [Exfiltrating Data](DataExfiltration.md)
### [Tunneling](../Tunneling/README.md)

# [Third-Party Guides](ThirdParty.md)

# References
##### [Post Exploitation](http://www.pentest-standard.org/index.php/Post_Exploitation)